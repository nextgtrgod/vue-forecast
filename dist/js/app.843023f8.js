(function(t){function e(e){for(var n,s,r=e[0],l=e[1],c=e[2],d=0,h=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,r=1;r<i.length;r++){var l=i[r];0!==o[l]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},o={app:0},a=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vue-forecast/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},1:function(t,e){},"11b5":function(t,e,i){"use strict";var n=i("fcfb"),o=i.n(n);o.a},"125f":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"ru":{"language":"Предпочитаемый язык","units":"Единицы измерения температуры"},"en":{"language":"Preferred language","units":"Temperature units"}}'),delete t.options._Ctor}},"1a8b":function(t,e,i){"use strict";var n=i("125f"),o=i.n(n);e["default"]=o.a},"1be1":function(t,e,i){t.exports=i.p+"img/pin.3c2d0c05.svg"},2:function(t,e){},2654:function(t,e,i){t.exports=i.p+"img/cloud_rain_night.40f6fa08.svg"},"27e4":function(t,e,i){t.exports=i.p+"img/arrow.d6611044.svg"},"2bc8":function(t,e,i){t.exports=i.p+"img/cloud_rain_alt_night.d718e5f6.svg"},"2da4":function(t,e,i){},3289:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"now":"Temperature now","feels-like":"feels like","humidity":"Humidity","wind":{"title":"Wind direction and speed","units":{"metric":"m/s","imperial":"mph"}},"pressure":{"title":"Pressure","units":"mmHg"},"cloudiness":"Cloudiness"},"ru":{"now":"Температура сейчас","feels-like":"ощущается как","humidity":"Влажность","wind":{"title":"Направление и скорость ветра","units":{"metric":"м/с","imperial":"mph"}},"pressure":{"title":"Давление","units":"мм. рт. ст."},"cloudiness":"Облачность"}}'),delete t.options._Ctor}},"39cf":function(t,e,i){t.exports=function(){return new Worker(i.p+"e115923dfe3475737f7c.worker.js")}},"3ad5":function(t,e){let i=()=>{let t=window.navigator.userAgent.toLowerCase(),e=t.indexOf("msie"),i=t.indexOf("trident"),n=t.indexOf("edge"),o=t.indexOf("firefox"),a=t.indexOf("chrome"),s=t.indexOf("safari");document.getElementsByTagName("html")[0];return e>0||i>0||n>0?"ie":o>0?"firefox":a>0?"chrome":s>0?"safari":void 0};t.exports=i},"3ce0":function(t,e,i){var n={"./cloud_day.svg":"967b","./cloud_drizzle_day.svg":"7276","./cloud_drizzle_night.svg":"526a","./cloud_fog_alt_day.svg":"9a4f","./cloud_fog_alt_night.svg":"655a","./cloud_fog_day.svg":"48d7","./cloud_fog_night.svg":"a4a1","./cloud_hail_day.svg":"3e67","./cloud_hail_night.svg":"d1ba","./cloud_lightning_day.svg":"7770","./cloud_lightning_night.svg":"b649","./cloud_night.svg":"b2e0","./cloud_rain_alt_day.svg":"ef70","./cloud_rain_alt_night.svg":"2bc8","./cloud_rain_day.svg":"4c9b","./cloud_rain_night.svg":"2654","./cloud_snow_alt_day.svg":"ffe9","./cloud_snow_alt_night.svg":"4b05","./cloud_snow_day.svg":"d4f7","./cloud_snow_night.svg":"5725","./sun_day.svg":"54af","./sun_night.svg":"5ca2","./tornado_day.svg":"66d8","./tornado_night.svg":"48a3"};function o(t){var e=a(t);return i(e)}function a(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=a,t.exports=o,o.id="3ce0"},"3e67":function(t,e,i){t.exports=i.p+"img/cloud_hail_day.d39dce22.svg"},"41f7":function(t,e,i){"use strict";var n=i("72a8"),o=i.n(n);o.a},"44a2":function(t,e,i){"use strict";var n=i("e61d"),o=i.n(n);o.a},"484a":function(t,e,i){},"48a3":function(t,e,i){t.exports=i.p+"img/tornado_night.b1e3cd0b.svg"},"48d7":function(t,e,i){t.exports=i.p+"img/cloud_fog_day.0912a816.svg"},"4b05":function(t,e,i){t.exports=i.p+"img/cloud_snow_alt_night.29a1adca.svg"},"4c9b":function(t,e,i){t.exports=i.p+"img/cloud_rain_day.5463cc77.svg"},"4cff":function(t,e,i){"use strict";var n=i("3289"),o=i.n(n);e["default"]=o.a},"526a":function(t,e,i){t.exports=i.p+"img/cloud_drizzle_night.9a2900f7.svg"},"54af":function(t,e,i){t.exports=i.p+"img/sun_day.0403bef5.svg"},"56d7":function(t,e,i){"use strict";i.r(e);var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",{attrs:{id:"app"}},[i("background"),i("div",{staticClass:"center"},[i("ui-switch",{staticClass:"units",attrs:{value:"metric"===t.units,labels:["C°","F°"],title:t.$t("units")},nativeOn:{click:function(e){return t.switchUnits(e)}}}),i("search",{ref:"search"}),t.forecast?i("widget"):t._e()],1),i("ui-switch",{staticClass:"language",attrs:{value:"en"===t.language,labels:["EN","RU"],title:t.$t("language")},nativeOn:{click:function(e){return t.switchLanguage(e)}}})],1)},a=[],s=i("2f62"),r=i("ec8b"),l={forecast:(t,e,i)=>"https://api.openweathermap.org/data/2.5/onecall?lang="+e+"&exclude=minutely,hourly"+`&lat=${t.latitude}&lon=${t.longitude}&appid=`+r["open_weather_api"],autocomplete:t=>"https://maps.googleapis.com/maps/api/js?&libraries=places&types=(cities)&language="+t+"&key="+r["google_places_api"]},c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{attrs:{id:"background"}})},u=[];let d={from:t=>t[~~(Math.random()*t.length)],range:(t=0,e=1)=>Math.random()*(e-t)+t};var h=d;let g=(t,e,i,n)=>Math.hypot(Math.abs(i-t),Math.abs(n-e));var f=g;const p=2*Math.PI;let m=0,_=0;class v{constructor({id:t,x:e,y:i,r:n,v:o,fill:a="#000"}){this.id=t,this.x=e,this.y=i,this.r=n,this.v=o,this.fill=a,this.lines={},this.bounds={top:0,right:0,bottom:0,left:0},this.updateBounds()}checkCollision(t,e){(this.bounds.left<=0&&this.v.x<=0||this.bounds.right>=t&&this.v.x>=0)&&(this.v.x*=-1),(this.bounds.top<=0&&this.v.y<=0||this.bounds.bottom>=e&&this.v.y>=0)&&(this.v.y*=-1)}updateBounds(){this.bounds.top=this.y-this.r,this.bounds.right=this.x+this.r,this.bounds.bottom=this.y+this.r,this.bounds.left=this.x-this.r}link(t,e){for(m=0;m<t.length;m++)t[m].id!==this.id&&(t[m].lines[this.id]||(_=f(this.x,this.y,t[m].x,t[m].y),_<=e&&_>=this.r+t[m].r?this.lines[t[m].id]={0:{x:this.x,y:this.y},1:{x:t[m].x,y:t[m].y},alpha:(e-_)/(e/2),width:Math.min(e/_,Math.min(this.r,t[m].r))}:delete this.lines[t[m].id]))}update(t,e,i,n,o){this.checkCollision(e,i),this.x+=this.v.x||0,this.y+=this.v.y||0,this.updateBounds(),this.link(n,o),t.beginPath(),t.fillStyle=this.fill,t.arc(this.x,this.y,this.r,0,p),t.fill()}}var y=v;const b=Math.PI;let w=0,x=0,O=[],k=({W:t,H:e,dpi:i})=>{O=[];let n=16,o=2;for(x=t/3,w=0;w<n;w++){let n=h.range(.5,o)*i,a=b/12,s=h.from([h.range(a,b/2-a),h.range(b/2+a,b-a),h.range(b+a,1.5*b-a),h.range(1.5*b+a,2*b-a)]);O.push(new y({id:w,x:h.range(0,t),y:h.range(0,e),r:h.range(6,10)*i,v:{x:n*Math.cos(s),y:n*Math.sin(s)}}))}},$=null,C=(t,{W:e,H:i})=>{for(t.fillStyle="#F0F0F0",t.fillRect(0,0,e,i),w=0;w<O.length;w++)for($ in O[w].update(t,e,i,O,x),O[w].lines)t.beginPath(),t.moveTo(O[w].lines[$][0].x,O[w].lines[$][0].y),t.lineTo(O[w].lines[$][1].x,O[w].lines[$][1].y),t.strokeStyle=`rgba(0, 0, 0, ${O[w].lines[$].alpha})`,t.lineWidth=O[w].lines[$].width,t.stroke()};var z=i("39cf"),M=i.n(z);class j{constructor(t){this.canvas=t,this.dpi=window.devicePixelRatio,this.init();let e=null;window.onresize=()=>{clearTimeout(e),e=setTimeout(()=>this.init(),150)}}init(){let t=window.innerWidth*this.dpi,e=window.innerHeight*this.dpi,i={W:t,H:e,dpi:this.dpi};if(this.worker)return this.worker.postMessage({options:i});if("transferControlToOffscreen"in this.canvas){this.worker=new M.a;let t=this.canvas.transferControlToOffscreen();this.worker.postMessage({canvas:t,options:i},[t])}else{this.canvas.width=t,this.canvas.height=e,cancelAnimationFrame(this.radId);let n=this.canvas.getContext("2d",{alpha:!1});k(i),this.update(n,i)}}update(...t){this.radId=requestAnimationFrame(()=>this.update(...t)),C(...t)}}var S=j,E={name:"Background",mounted(){this.reducedMotion||(this.sketch=new S(this.$el,2,2))},computed:{...Object(s["b"])({reducedMotion:t=>t.reducedMotion})}},P=E,T=(i("5e99"),i("2877")),F=Object(T["a"])(P,c,u,!1,null,"f68c7f28",null),I=F.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"search"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",attrs:{type:"text"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),n("button",{ref:"button",attrs:{disabled:t.loading,title:t.$t("location")},on:{click:t.locate}},[n("img",{attrs:{src:i("1be1"),role:"presentation"}})])])},L=[],N={name:"Search",data(){return{query:"",loading:!1}},async mounted(){await this.init(),this.coords||this.locate()},methods:{init(){return new Promise(t=>{let e=document.getElementById("google-maps-api");e&&(document.body.removeChild(e),delete google.maps);let i=document.createElement("script");i.id="google-maps-api",i.onload=()=>{this.autocomplete=new google.maps.places.Autocomplete(this.$refs["input"],{types:["(cities)"]}),this.geocoder=new google.maps.Geocoder,google.maps.event.addListener(this.autocomplete,"place_changed",this.search),t(),this.coords&&this.getCity()},i.src=l.autocomplete(this.language),document.body.appendChild(i)})},async locate(t,e){this.loading=!0;try{let{coords:t}=await new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(t,e)});this.$store.commit("setCoords",{latitude:t.latitude,longitude:t.longitude}),await this.getCity()}catch(i){this.$refs["button"].classList.remove("error"),setTimeout(()=>this.$refs["button"].classList.add("error"),100)}this.loading=!1},getCity(){return new Promise((t,e)=>{let i={location:new google.maps.LatLng(this.coords.latitude,this.coords.longitude)};this.geocoder.geocode(i,(i,n)=>{if("OK"===!n||!i)return e();let o=i.find(t=>t.types.includes("locality"));if(!o)return e();document.title=o.formatted_address,this.query=o.formatted_address,t()})})},search(){let t=this.autocomplete.getPlace();if(!t.geometry)return;let e=t.geometry.location.lat(),i=t.geometry.location.lng();this.$store.commit("setCoords",{latitude:e,longitude:i,name:t.formatted_address})}},computed:{...Object(s["b"])({coords:t=>t.coords,language:t=>t.language})}},q=N,A=(i("878c"),i("7fdf")),B=Object(T["a"])(q,W,L,!1,null,"052b0536",null);"function"===typeof A["default"]&&Object(A["default"])(B);var D=B.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{id:"widget"}},[i("weather"),i("div",{ref:"scroll-area",staticClass:"scroll-area"},[i("ul",[t._l(t.days,(function(t,e){return i("forecast",{key:e,attrs:{date:t.date,weather_id:t.weather_id}})})),i("forecast",{attrs:{date:t.lastDate}})],2),i("canvas",{ref:"canvas"})])],1)},V=[],H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{visible:t.today},attrs:{id:"weather"}},[i("div",{staticClass:"status"},[i("icon",{staticClass:"icon",attrs:{id:t.icon.id,daytime:t.icon.daytime}}),i("h2",[t._v(t._s(t.icon.description))])],1),i("div",{staticClass:"temp"},[i("h1",{attrs:{title:t.$t("now")}},[t._v(t._s(t.temp.current)+"°")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.temp.current!==t.temp.feels,expression:"temp.current !== temp.feels"}]},[t._v(" "+t._s(t.$t("feels-like"))+" "),i("strong",[t._v(t._s(t.temp.feels)+"°")])]),i("p",[t._v(" "+t._s(t.temp.min!==t.temp.max?t.temp.min+".."+t.temp.max+"°":null)+" ")])]),i("ul",t._l(t.info,(function(e,n){return i("li",{key:n,attrs:{title:e.title}},[i("img",{style:e.style,attrs:{src:e.icon,alt:""}}),i("span",{attrs:{"data-units":e.units}},[t._v(t._s(e.value))])])})),0)])},J=[],R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icon"},[t.animation?i("img",{attrs:{src:t.icon,alt:""}}):i("i",{class:t.icon,attrs:{"aria-hidden":""}})])},Z=[];const Y={200:"cloud_lightning",201:"cloud_lightning",202:"cloud_lightning",210:"cloud_lightning",211:"cloud_lightning",212:"cloud_lightning",221:"cloud_lightning",230:"cloud_lightning",231:"cloud_lightning",232:"cloud_lightning",300:"cloud_drizzle",301:"cloud_drizzle",302:"cloud_drizzle",310:"cloud_drizzle",311:"cloud_drizzle",312:"cloud_drizzle",313:"cloud_drizzle",314:"cloud_drizzle",321:"cloud_drizzle",500:"cloud_rain",501:"cloud_rain",502:"cloud_rain",503:"cloud_rain",504:"cloud_rain",511:"cloud_hail",520:"cloud_rain_alt",521:"cloud_rain_alt",522:"cloud_rain_alt",531:"cloud_rain_alt",600:"cloud_snow",601:"cloud_snow_alt",602:"cloud_snow_alt",611:"cloud_hail",612:"cloud_hail",615:"cloud_hail",616:"cloud_hail",620:"cloud_snow",621:"cloud_snow",622:"cloud_snow_alt",701:"cloud_fog",711:"cloud_fog_alt",721:"cloud_fog",731:"tornado",741:"cloud_fog",751:"cloud_fog_alt",761:"cloud_fog_alt",762:"cloud_fog_alt",771:"cloud_fog_alt",781:"tornado",800:"sun",801:"cloud",802:"cloud",803:"cloud",804:"cloud"};var G=Y,Q={name:"Icon",props:{id:{type:Number},daytime:{type:String,default:"day"}},computed:{...Object(s["b"])({reducedMotion:t=>t.reducedMotion,browser:t=>t.browser}),animation(){return!this.reducedMotion&&"chrome"===this.browser},icon(){if(!this.animation)return`wi wi-owm-${this.daytime}-${this.id}`;try{return i("3ce0")(`./${G[this.id]}_${this.daytime}.svg`)}catch{return console.log("no icon for id "+this.id),i("5947")(`./sun_${this.daytime}.svg`)}}}},K=Q,X=(i("c212"),Object(T["a"])(K,R,Z,!1,null,"0cbaa47f",null)),tt=X.exports,et=i("a925");n["a"].use(et["a"]);let it=["en","ru"],nt=it.find(t=>t===localStorage.getItem("language"))||it[0];document.documentElement.lang!==nt&&(document.documentElement.lang=nt);const ot={en:{weekday:{weekday:"long"},date:{day:"numeric",month:"long"}},ru:{weekday:{weekday:"long"},date:{day:"numeric",month:"long"}}},at=new et["a"]({locale:nt,fallbackLocale:it[0],dateTimeFormats:ot,silentFallbackWarn:!0});var st=at,rt=i("3ad5"),lt=i.n(rt);const ct=lt()(),ut=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(document.documentElement.classList.add(ct),ut||"chrome"!==ct){let t=document.createElement("link");t.rel="stylesheet",t.href="weather-icons/weather-icons.css",document.head.appendChild(t)}let dt=null;try{let{latitude:t,longitude:e}=JSON.parse(localStorage.getItem("coords"))||{};t&&e&&(dt={latitude:t,longitude:e})}catch(ne){console.warn("Error reading localStorage:",ne)}let ht=["metric","imperial"].find(t=>t===localStorage.getItem("units"))||"metric";var gt={browser:ct,reducedMotion:ut,coords:dt,language:st.locale,units:ht,forecast:null,last_update:null};var ft={setLanguage:(t,e)=>{t.language=e,st.locale=t.language,document.documentElement.lang=t.language,localStorage.setItem("language",t.language)},setCoords:(t,e)=>{t.coords=e,document.title=t.coords.name,localStorage.setItem("coords",JSON.stringify({latitude:t.coords.latitude,longitude:t.coords.longitude}))},setUnits:(t,e)=>{t.units=e,localStorage.setItem("units",t.units)},setForecast:(t,e)=>{t.forecast=e}};n["a"].use(s["a"]);var pt=new s["a"].Store({state:gt,mutations:ft}),mt={temp:t=>({metric:t=>Math.round(t-273.15),imperial:t=>Math.round(9*(t-273.15)/5+32)}[pt.state.units](t)),speed:t=>({metric:t=>Math.round(t),imperial:t=>Math.round(2.237*t)}[pt.state.units](t)),date:t=>1e3*(t+pt.state.forecast.timezone_offset)};let _t=window.matchMedia("(prefers-color-scheme: dark)").matches?"#FFF":"#000",vt=(t,e)=>{let i=document.createElement("canvas");i.width=128,i.height=128;let n=i.getContext("2d");n.textBaseline="middle",n.textAlign="center",n.font=e,n.clearRect(0,0,i.width,i.height),n.fillStyle=_t,n.fillText(t,i.width/2,i.height/2,i.width);let o=i.toDataURL("image/png"),a=document.querySelector('link[rel*="icon"]');a.type="image/x-icon",a.href=o};var yt=vt,bt={name:"Weather",components:{Icon:tt},computed:{...Object(s["b"])({units:t=>t.units,current:t=>t.forecast.current,today:t=>(t.forecast.daily||[])[0]}),icon(){let t=Date.now(),e=t>1e3*this.current.sunrise&&t<1e3*this.current.sunset?"day":"night";return{id:this.current.weather[0].id,daytime:e,description:this.current.weather[0].description}},temp(){let t=mt.temp(this.current.temp);return yt(t+"°","bold 128px jura"),{current:t,feels:mt.temp(this.current.feels_like),min:mt.temp(this.today.temp.min),max:mt.temp(this.today.temp.max)}},info(){return{humidity:{value:this.current.humidity,units:"%",icon:i("f5e0"),title:this.$t("humidity")},wind:{value:mt.speed(this.current.wind_speed),units:this.$t("wind.units."+this.units),icon:i("27e4"),style:{transform:`rotate(${45*Math.round(this.current.wind_deg%360/45)}deg)`},title:this.$t("wind.title")},pressure:{value:Math.round(this.current.pressure/1.33322368),units:this.$t("pressure.units"),icon:i("823b"),title:this.$t("pressure.title")},cloudiness:{value:this.current.clouds,units:"%",icon:i("9853"),title:this.$t("cloudiness")}}}}},wt=bt,xt=(i("44a2"),i("4cff")),Ot=Object(T["a"])(wt,H,J,!1,null,"46d30802",null);"function"===typeof xt["default"]&&Object(xt["default"])(Ot);var kt=Ot.exports,$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"forecast"},[i("h3",[i("span",[t._v(t._s(t.$d(t.date,"weekday")))]),t.weather_id?i("icon",{attrs:{id:t.weather_id}}):t._e()],1),i("h4",[t._v(t._s(t.$d(t.date,"date")))]),i("ul",{staticClass:"daytimes"},t._l(t.daytimes,(function(e,n){return i("li",{key:n},[t._v(" "+t._s(t.$t(e))+": ")])})),0)])},Ct=[],zt={name:"Forecast",components:{Icon:tt},props:{date:{type:Number,required:!0},weather_id:{type:Number}},data:()=>({daytimes:["morning","day","evening","night"]})},Mt=zt,jt=(i("9504"),i("b5a0")),St=Object(T["a"])(Mt,$t,Ct,!1,null,"e0264564",null);"function"===typeof jt["default"]&&Object(jt["default"])(St);var Et=St.exports,Pt=i("2222"),Tt=i.n(Pt),Ft=i("8bd6"),It=i.n(Ft);let Wt=0,Lt=7,Nt=Wt*Lt,qt=100;class At{constructor({canvas:t,font:e,bgColor:i,fillColor:n}){Tt.a.setup(t),Wt=Math.min(520,window.innerWidth),Tt.a.view.viewSize.width=Nt,Tt.a.view.viewSize.height=qt,window.addEventListener("resize",()=>this.setSize()),this.font=e,this.bgColor=i,this.fillColor=n}setSize(){Wt=Math.min(520,window.innerWidth),this.update(this.data)}update(t){this.data=t;let e=this.convert(this.data);Nt=e[e.length-1].x,Tt.a.view.viewSize.width=Nt,this.plot&&this.plot.remove(),this.labels&&this.labels.forEach(t=>t.remove()),this.plot=new Tt.a.Path({segments:[[0,qt],...e.map(({x:t,y:e})=>[t,e]),[Nt,qt]],fillColor:this.fillColor}),this.plot.smooth({from:2}),this.labels=[];for(let i=0;i<e.length;i++){let t=new Tt.a.PointText({content:e[i].content,fillColor:this.font.color,fontFamily:this.font.family,fontSize:this.font.size,fontWeight:"bold"});t.pivot=t.bounds.bottomLeft;let n=0;i%4===0&&(n=12),(i+3)%4===0&&(t.fontSize=this.font.size_accent,n=-2),t.position=new Tt.a.Point(e[i].x+n,e[i].y),this.labels.push(t)}}convert(t){let e=[qt/6,qt-1.45*this.font.size_accent],i=t.flat(),n=Math.min(...i),o=Math.max(...i),a=0,s=t.reduce((t,i,s)=>(a=Wt/i.length,[...t,...i.map((t,i)=>({x:s*Wt+i*a,y:qt-It()(t,n,o,e[0],e[1]),content:t+"°"}))]),[]);for(let r=0;r<4;r++)s.push({x:s[s.length-1].x+a,y:qt-It()(h.range(n,o),n,o,e[0],e[1]),content:"🤔"});return s.push({...s[s.length-1],x:s[s.length-1].x+a}),s}}var Bt=At;var Dt={name:"Widget",components:{Weather:kt,Forecast:Et},data:()=>({progress:0}),mounted(){this.init();let t=this.$refs["scroll-area"];t.addEventListener("scroll",e=>{this.progress=t.scrollLeft/(t.scrollWidth-t.clientWidth)})},methods:{init(){let t="jura",e=getComputedStyle(document.documentElement);this.preload(t).then(()=>{this.chart=new Bt({canvas:this.$refs["canvas"],font:{family:t,size:16,size_accent:28,color:e.getPropertyValue("--color-text")},bgColor:e.getPropertyValue("--color-bg"),fillColor:e.getPropertyValue("--color-chart")}),this.chart.update(this.values)})},preload:t=>new Promise(e=>{if(!("fonts"in document))return e();document.fonts.load("1em "+t).then(e)})},computed:{...Object(s["b"])({days:t=>t.forecast.daily.map(t=>({date:mt.date(t.dt),weather_id:t.weather[0].id,temp:["morn","day","eve","night"].map(e=>mt.temp(t.temp[e]))}))}),values(){return this.days.map(t=>t.temp)},lastDate(){return this.days[this.days.length-1].date+864e5}},watch:{values(t){this.chart&&(this.chart.update(t),this.$nextTick(()=>{this.$refs["scroll-area"].scrollTo({left:0,behavior:"smooth"})}))}}},Ut=Dt,Vt=(i("11b5"),Object(T["a"])(Ut,U,V,!1,null,"a208886a",null)),Ht=Vt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"ui-switch",class:{active:t.innerValue},attrs:{title:t.title},on:{click:t.toggle}},[n("span",[t._v(t._s(t.labels[0]))]),n("span",[t._v(t._s(t.labels[1]))]),n("audio",{ref:"audio",attrs:{src:i("c94c"),preload:"auto",hidden:""}})])},Rt=[],Zt={name:"uiSwitch",props:{value:{type:Boolean,default:!1},labels:{type:Array,default:()=>[]},title:{type:String}},data(){return{innerValue:this.value}},methods:{toggle(){this.innerValue=!this.innerValue,this.$refs["audio"].currentTime=0,this.$refs["audio"].play()}},watch:{value(t){this.innerValue=t},innerValue(t){this.$emit("input",t)}}},Yt=Zt,Gt=(i("41f7"),Object(T["a"])(Yt,Jt,Rt,!1,null,"cb56bbaa",null)),Qt=Gt.exports,Kt={name:"App",components:{Background:I,Search:D,Widget:Ht,uiSwitch:Qt},methods:{async getForecast(){try{let t=await fetch(l.forecast(this.coords,this.language,this.units)),e=await t.json();this.$store.commit("setForecast",e)}catch(ne){console.log(ne)}},switchUnits(){this.$store.commit("setUnits","metric"===this.units?"imperial":"metric")},switchLanguage(){this.$store.commit("setLanguage","en"===this.language?"ru":"en"),this.$refs["search"].init().then(this.getForecast)}},computed:{...Object(s["b"])({language:t=>t.language,coords:t=>t.coords,units:t=>t.units,forecast:t=>t.forecast})},watch:{coords:{immediate:!0,handler(t){t&&this.getForecast(t)}}}},Xt=Kt,te=(i("5c0b"),i("1a8b")),ee=Object(T["a"])(Xt,o,a,!1,null,null,null);"function"===typeof te["default"]&&Object(te["default"])(ee);var ie=ee.exports;n["a"].config.productionTip=!1,new n["a"]({store:pt,i18n:st,render:function(t){return t(ie)}}).$mount("#app")},5725:function(t,e,i){t.exports=i.p+"img/cloud_snow_night.0e811a86.svg"},5947:function(t,e,i){var n={"./sun_day.svg":"54af","./sun_night.svg":"5ca2"};function o(t){var e=a(t);return i(e)}function a(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=a,t.exports=o,o.id="5947"},"5c0b":function(t,e,i){"use strict";var n=i("9c0c"),o=i.n(n);o.a},"5ca2":function(t,e,i){t.exports=i.p+"img/sun_night.5ce13094.svg"},"5e99":function(t,e,i){"use strict";var n=i("484a"),o=i.n(n);o.a},"655a":function(t,e,i){t.exports=i.p+"img/cloud_fog_alt_night.c4dd0bbf.svg"},"66d8":function(t,e,i){t.exports=i.p+"img/tornado_day.b1e3cd0b.svg"},7276:function(t,e,i){t.exports=i.p+"img/cloud_drizzle_day.29c92232.svg"},"72a8":function(t,e,i){},7770:function(t,e,i){t.exports=i.p+"img/cloud_lightning_day.47fbb71d.svg"},"7fdf":function(t,e,i){"use strict";var n=i("f230"),o=i.n(n);e["default"]=o.a},"823b":function(t,e,i){t.exports=i.p+"img/thermometer.f498dc85.svg"},"878c":function(t,e,i){"use strict";var n=i("de1b"),o=i.n(n);o.a},"8bd6":function(t,e){let i=(t,e,i,n,o)=>(t-e)*(o-n)/(i-e)+n;t.exports=i},9504:function(t,e,i){"use strict";var n=i("baa6"),o=i.n(n);o.a},"967b":function(t,e,i){t.exports=i.p+"img/cloud_day.b3991426.svg"},9853:function(t,e,i){t.exports=i.p+"img/cloud.1228a313.svg"},"9a4f":function(t,e,i){t.exports=i.p+"img/cloud_fog_alt_day.fdb32528.svg"},"9c0c":function(t,e,i){},a4a1:function(t,e,i){t.exports=i.p+"img/cloud_fog_night.aac68235.svg"},b2e0:function(t,e,i){t.exports=i.p+"img/cloud_night.89d85c37.svg"},b5a0:function(t,e,i){"use strict";var n=i("f858"),o=i.n(n);e["default"]=o.a},b649:function(t,e,i){t.exports=i.p+"img/cloud_lightning_night.009cf303.svg"},baa6:function(t,e,i){},c212:function(t,e,i){"use strict";var n=i("2da4"),o=i.n(n);o.a},c94c:function(t,e,i){t.exports=i.p+"media/click.ceec2fc0.mp3"},d1ba:function(t,e,i){t.exports=i.p+"img/cloud_hail_night.6b2a7671.svg"},d4f7:function(t,e,i){t.exports=i.p+"img/cloud_snow_day.93bfbcd5.svg"},de1b:function(t,e,i){},e61d:function(t,e,i){},ec8b:function(t,e){t.exports={open_weather_api:"2c3411e04634c1650d366b2b58e053bc",google_places_api:"AIzaSyAfPiD9Aa3AQ5a4oMDahOTTqPyZ8tW2BlY",mapbox_api:"pk.eyJ1IjoibmV4dGd0cmdvZCIsImEiOiJja2JxZjEwMzkwYWNsMzZwODBpcHR6MWNqIn0.I_E6_0OtjTggEpvguSU4FQ"}},ef70:function(t,e,i){t.exports=i.p+"img/cloud_rain_alt_day.6aff9330.svg"},f230:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"ru":{"location":"Ваше расположение"},"en":{"location":"Your location"}}'),delete t.options._Ctor}},f5e0:function(t,e,i){t.exports=i.p+"img/raindrop.41658d0d.svg"},f858:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"morning":"morning","day":"day","evening":"evening","night":"night"},"ru":{"morning":"утро","day":"день","evening":"вечер","night":"ночь"}}'),delete t.options._Ctor}},fcfb:function(t,e,i){},ffe9:function(t,e,i){t.exports=i.p+"img/cloud_snow_alt_day.93af63a7.svg"}});